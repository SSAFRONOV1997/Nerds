const contactLink=document.querySelector(".contacts__link"),modal=document.querySelector(".modal-feedback"),modalClose=modal.querySelector(".modal-feedback__close"),modalForm=modal.querySelector(".modal-feedback__form"),userLog=modal.querySelector("[type=text]"),userEmail=modal.querySelector("[type=email"),userText=modal.querySelector(".modal-feedback__item--textarea"),warnings=modal.querySelectorAll(".modal-feedback__item");let isStorageSupport=!0,storageLogin="",storageEmail="";try{storageLogin=localStorage.getItem("login"),storageEmail=localStorage.getItem("mail")}catch(e){isStorageSupport=!1}contactLink.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-hidden"),storageLogin&&(userLog.value=storageLogin,userEmail.focus()),storageEmail?(userEmail.value=storageEmail,userText.focus()):userLog.focus()}),modalClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-hidden"),modal.classList.remove("modal-error")}),modalForm.addEventListener("submit",function(e){if(userLog.value&&userEmail.value&&userText.value)isStorageSupport&&(localStorage.setItem("login",userLog.value),localStorage.setItem("mail",userEmail.value));else{e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error");for(let e=0;e<warnings.length;e++){let o=warnings[e];o.value<=0?o.classList.add("error-form"):o.classList.remove("error-form")}}}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modal.classList.add("modal-hidden"),modal.classList.remove("modal-error"))});
